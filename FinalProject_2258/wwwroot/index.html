<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Final Project API UI</title>
    <style>
        body { font-family: sans-serif; margin: 20px; }
        .section { border: 1px solid #ccc; padding: 15px; margin-bottom: 20px; border-radius: 5px; }
        h2 { margin-top: 0; }
        input { margin-bottom: 5px; display: block; }
        button { margin-top: 10px; cursor: pointer; }
        pre { background: #f4f4f4; padding: 10px; }
    </style>
</head>
<body>
    <h1>Final Project API UI</h1>

    <div class="section">
        <h2>Team Members</h2>
        <button onclick="loadData('TeamMembers')">Load Team Members</button>
        <div id="TeamMembers-output"></div>
        <h3>Add Team Member</h3>
        <input type="text" id="tm-name" placeholder="Name">
        <input type="date" id="tm-birthdate" placeholder="Birthdate">
        <input type="text" id="tm-program" placeholder="College Program">
        <input type="text" id="tm-year" placeholder="Year in Program">
        <input type="text" id="tm-role" placeholder="Role">
        <button onclick="addTeamMember()">Add</button>
    </div>

    <div class="section">
        <h2>Hobbies</h2>
        <button onclick="loadData('Hobby')">Load Hobbies</button>
        <div id="Hobby-output"></div>
        <h3>Add Hobby</h3>
        <input type="text" id="hobby-name" placeholder="Name">
        <input type="text" id="hobby-desc" placeholder="Description">
        <input type="text" id="hobby-cat" placeholder="Category">
        <input type="number" id="hobby-cost" placeholder="Estimated Cost">
        <button onclick="addHobby()">Add</button>
    </div>

    <div class="section">
        <h2>Pets</h2>
        <button onclick="loadData('Pets')">Load Pets</button>
        <div id="Pets-output"></div>
        <h3>Add Pet</h3>
        <input type="text" id="pet-name" placeholder="Name">
        <input type="text" id="pet-type" placeholder="Type">
        <input type="number" id="pet-age" placeholder="Age">
        <input type="text" id="pet-color" placeholder="Color">
        <input type="number" id="pet-studentId" placeholder="Student ID">
        <button onclick="addPet()">Add</button>
    </div>

    <div class="section">
        <h2>Courses</h2>
        <button onclick="loadData('Courses')">Load Courses</button>
        <div id="Courses-output"></div>
        <h3>Add Course</h3>
        <input type="text" id="course-name" placeholder="Name">
        <input type="number" id="course-credits" placeholder="Credits">
        <input type="text" id="course-semester" placeholder="Semester">
        <input type="text" id="course-instructor" placeholder="Instructor">
        <input type="number" id="course-studentId" placeholder="Student ID">
        <button onclick="addCourse()">Add</button>
    </div>

    <script>
        async function loadData(controller) {
            const output = document.getElementById(`${controller}-output`);
            output.innerHTML = "Loading...";
            try {
                const res = await fetch(`/api/${controller}`);
                const data = await res.json();
                output.innerHTML = `<pre>${JSON.stringify(data, null, 2)}</pre>`;
            } catch (err) {
                output.innerHTML = `<span style="color:red">Error: ${err.message}</span>`;
            }
        }

        async function addTeamMember() {
            const data = {
                name: document.getElementById('tm-name').value,
                birthdate: document.getElementById('tm-birthdate').value,
                collegeProgram: document.getElementById('tm-program').value,
                yearInProgram: document.getElementById('tm-year').value,
                role: document.getElementById('tm-role').value
            };
            await postData('TeamMembers', data);
        }

        async function addHobby() {
            const data = {
                name: document.getElementById('hobby-name').value,
                description: document.getElementById('hobby-desc').value,
                category: document.getElementById('hobby-cat').value,
                estimatedCost: parseFloat(document.getElementById('hobby-cost').value)
            };
            await postData('Hobby', data);
        }

        async function addPet() {
            const data = {
                petName: document.getElementById('pet-name').value,
                petType: document.getElementById('pet-type').value,
                petAge: parseInt(document.getElementById('pet-age').value),
                color: document.getElementById('pet-color').value,
                studentId: parseInt(document.getElementById('pet-studentId').value)
            };
            await postData('Pets', data);
        }

        async function addCourse() {
            const data = {
                courseName: document.getElementById('course-name').value,
                credits: parseInt(document.getElementById('course-credits').value),
                semester: document.getElementById('course-semester').value,
                instructor: document.getElementById('course-instructor').value,
                studentId: parseInt(document.getElementById('course-studentId').value)
            };
            await postData('Courses', data);
        }

        async function postData(controller, data) {
            try {
                const res = await fetch(`/api/${controller}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                if (res.ok) {
                    alert('Added successfully!');
                    loadData(controller);
                } else {
                    const txt = await res.text();
                    alert('Error: ' + txt);
                }
            } catch (err) {
                alert('Error: ' + err.message);
            }
        }
    </script>
</body>
</html>
